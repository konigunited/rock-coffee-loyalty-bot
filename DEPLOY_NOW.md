# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Ubuntu + Docker)

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ù–ï –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã!

–≠—Ç–æ—Ç –¥–µ–ø–ª–æ–π –≤–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π —Å –î–†
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã (CPU, –¥–∏—Å–∫, –ë–î)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)

---

## üìã –ß—Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
1. `broadcast.service.ts` - –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sendBirthdayWishes()`
2. `notification.service.ts` - —É–±—Ä–∞–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
3. `system.service.ts` - —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤–º–µ—Å—Ç–æ –º–æ–∫–æ–≤

### ‚ö†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –£–ñ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω—ã):
- `003_timezone_setup.sql` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∑–æ–Ω—ã
- `004_fix_total_spent.sql` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ total_spent

**–í–ê–ñ–ù–û:** –¢–∞–±–ª–∏—Ü—ã `clients`, `users`, `point_transactions` –ù–ï –∏–∑–º–µ–Ω—è—é—Ç—Å—è!

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π (–¥–∞—É–Ω—Ç–∞–π–º ~5-10 —Å–µ–∫—É–Ω–¥)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh your_user@your_server_ip
cd /path/to/rc_bot
```

---

### –®–∞–≥ 2: –ë—ç–∫–∞–ø –ë–î (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec rock_coffee_db pg_dump -U postgres rock_coffee_bot > backup_$(date +%Y%m%d_%H%M%S).sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±—ç–∫–∞–ø —Å–æ–∑–¥–∞–ª—Å—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 10KB)
ls -lh backup_*.sql | tail -1
```

‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –§–∞–π–ª `backup_20251007_*.sql` —Ä–∞–∑–º–µ—Ä–æ–º > 10KB

---

### –®–∞–≥ 3: –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–º–º–∏—Ç (–¥–ª—è –æ—Ç–∫–∞—Ç–∞)

```bash
# –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç hash –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç–∫–∞—Ç–∞
git log --oneline -1
```

---

### –®–∞–≥ 4: –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –°–∫–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å GitHub
git pull origin main
```

‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Updating 000979f..275309f
 8 files changed, 703 insertions(+), 50 deletions(-)
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (–í–ê–ñ–ù–û!)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–π
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "\dt"
```

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
- ‚úÖ `activity_log`
- ‚úÖ `broadcasts`
- ‚úÖ `clients`
- ‚úÖ `point_transactions`
- ‚úÖ `sessions`
- ‚úÖ `telegram_messages_log`
- ‚úÖ `users`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–∑–æ–Ω—É:**
```bash
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "SHOW timezone;"
```

‚úÖ **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** `Europe/Kaliningrad`

**–ï—Å–ª–∏ —Ç–∞–π–º–∑–æ–Ω–∞ –ù–ï Kaliningrad, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 003:**
```bash
docker cp migrations/003_timezone_setup.sql rock_coffee_db:/tmp/
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -f /tmp/003_timezone_setup.sql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å total_spent —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "SELECT id, full_name, total_spent FROM clients LIMIT 3;"
```

‚úÖ **–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:** –ö–ª–∏–µ–Ω—Ç—ã —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ `total_spent`

---

### –®–∞–≥ 6: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –±–æ—Ç–∞ (–±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑ —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
docker-compose build bot
```

‚è±Ô∏è **–í—Ä–µ–º—è:** 30-60 —Å–µ–∫—É–Ω–¥
‚úÖ **–°—Ç–∞—Ç—É—Å:** –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

---

### –®–∞–≥ 7: –ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç –±–æ—Ç–∞ (–¥–∞—É–Ω—Ç–∞–π–º ~5-10 —Å–µ–∫)

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–æ—Ç (–ë–î –æ—Å—Ç–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å)
docker-compose up -d bot
```

‚è±Ô∏è **–î–∞—É–Ω—Ç–∞–π–º:** 5-10 —Å–µ–∫—É–Ω–¥
‚úÖ **–ë–î:** –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

---

### –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫)
docker-compose logs --tail=30 bot

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint
curl http://localhost:3000/health

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
# {"status":"ok","timestamp":"2025-..."}

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# rock_coffee_bot   Up
# rock_coffee_db    Up

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
docker-compose logs bot | grep -i error | tail -10
```

---

### –®–∞–≥ 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
   - ‚úÖ –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
   - ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É
   - ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ - –û–¢–ö–ê–¢

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–∞—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–¥ (–ë–î –æ—Å—Ç–∞–µ—Ç—Å—è)

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
git log --online -5

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç (000979f)
git checkout 000979f

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
docker-compose build bot
docker-compose up -d bot

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs --tail=20 bot
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ë–î

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç
docker-compose stop bot

# 2. –ù–∞–π—Ç–∏ —Å–≤–æ–π –±—ç–∫–∞–ø
ls -lh backup_*.sql | tail -1

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ –±—ç–∫–∞–ø–∞
cat backup_20251007_HHMMSS.sql | docker exec -i rock_coffee_db psql -U postgres -d rock_coffee_bot

# 4. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥
git checkout 000979f

# 5. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose build bot
docker-compose up -d bot
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É Ubuntu
- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –ë–î (—Ñ–∞–π–ª > 10KB)
- [ ] –ó–∞–ø–æ–º–Ω–∏–ª —Ç–µ–∫—É—â–∏–π hash –∫–æ–º–º–∏—Ç–∞
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω `git pull origin main`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ç–∞–π–º–∑–æ–Ω–∞ `Europe/Kaliningrad`
- [ ] –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –æ–±—Ä–∞–∑ `docker-compose build bot`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –±–æ—Ç `docker-compose up -d bot`
- [ ] Health endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok"}`
- [ ] –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram –Ω–∞ `/start`
- [ ] –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–ø–æ–∏—Å–∫, –±–∞–ª–ª—ã, —Å–æ–æ–±—â–µ–Ω–∏—è)

---

## üìä –ò—Ç–æ–≥–æ–≤–æ–µ –≤—Ä–µ–º—è –¥–∞—É–Ω—Ç–∞–π–º–∞: ~5-10 —Å–µ–∫—É–Ω–¥

## üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:

‚úÖ **–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ù–ï –ó–ê–¢–†–û–ù–£–¢–´:**
- –¢–∞–±–ª–∏—Ü–∞ `clients` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞ `users` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞ `point_transactions` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞ `sessions` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞ `telegram_messages_log` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚úÖ **Docker volume `postgres_data`:**
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

‚úÖ **–ë—ç–∫–∞–ø –ë–î —Å–æ–∑–¥–∞–Ω** –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

---

## üìû –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```bash
docker-compose logs -f bot
```
*–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞*

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã:
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
docker stats --no-stream

# –†–∞–∑–º–µ—Ä –ë–î
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "SELECT pg_size_pretty(pg_database_size('rock_coffee_bot'));"

# –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "SELECT COUNT(*) FROM sessions WHERE expires_at > NOW();"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
docker exec -it rock_coffee_db psql -U postgres -d rock_coffee_bot -c "SELECT COUNT(*) as total_clients FROM clients WHERE is_active = true;"
```

---

## üéØ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —ç—Ç–æ–º –¥–µ–ø–ª–æ–µ:

### 1. broadcast.service.ts
- –û—Ç–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π `sendBirthdayWishes()`
- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{success: true, sentCount: 0, errors: []}`

### 2. notification.service.ts
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- –£–¥–∞–ª–µ–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `total_points_earned`

### 3. system.service.ts
- Uptime: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `process.uptime()` –≤–º–µ—Å—Ç–æ –∫–æ–º–∞–Ω–¥—ã Linux
- DB connections: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `pg_stat_activity`
- CPU: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `process.cpuUsage()`
- Disk: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ WMIC (Windows) / df (Linux)
- Error logs: —á–∏—Ç–∞–µ—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `activity_log`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `logError()` –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ—à–∏–±–æ–∫ –≤ –ë–î

### 4. –ú–∏–≥—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã):
- `003_timezone_setup.sql` - —Ç–∞–π–º–∑–æ–Ω–∞ Europe/Kaliningrad
- `004_fix_total_spent.sql` - —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è total_spent

---

**–ì–æ—Ç–æ–≤–æ! –î–µ–ø–ª–æ–π –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏ –Ω–µ –∑–∞—Ç—Ä–æ–Ω–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤! üéâ**

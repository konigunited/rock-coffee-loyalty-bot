# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–ü–ï–†–ê–¶–ò–ô –£–ü–†–ê–í–õ–Ø–Æ–©–ï–ì–û

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–£–ø—Ä–∞–≤–ª—è—é—â–∏–π –Ω–µ –º–æ–≥ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–ª–ª–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:
- `manager_earn:1` - Unhandled callback data
- `manager_spend:1` - Unhandled callback data  
- `give_bonus:1` - Unhandled callback data
- `adjust_points:1` - Unhandled callback data
- `edit_client:1` - Unhandled callback data
- `edit_notes:1` - Unhandled callback data
- `client_history:1` - Unhandled callback data
- `send_sms:1` - Unhandled callback data

**–í—Å–µ –∫–Ω–æ–ø–∫–∏ –±—ã–ª–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏!**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤ –≤ ManagerHandler

#### üí∞ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–ª–ª–∞–º–∏:
- **`startManagerEarn()`** - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –∑–∞ –ø–æ–∫—É–ø–∫—É
- **`confirmManagerEarn()`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è  
- **`startManagerSpend()`** - –°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤
- **`confirmManagerSpend()`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è

#### üéÅ –ë–æ–Ω—É—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- **`giveBonus()`** - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ (–¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è, –ø—Ä–∞–∑–¥–Ω–∏–∫, VIP, etc.)
- **`confirmBonus()`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞
- **`adjustPoints()`** - –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞
- **`confirmAdjustment()`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

#### ‚úèÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞:
- **`editClient()`** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- **`editClientNotes()`** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫
- **`showClientHistory()`** - –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∫–ª–∏–µ–Ω—Ç–∞

#### üì± SMS –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **`sendSMS()`** - –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–ª–∏–µ–Ω—Ç—É
- **`sendSMSTemplate()`** - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ —à–∞–±–ª–æ–Ω—É

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ index.ts

```typescript
// MANAGER CLIENT OPERATIONS  
else if (data.startsWith('manager_earn:')) {
  const clientId = parseInt(data.split(':')[1]);
  await managerHandler.startManagerEarn(ctx, clientId);
}
else if (data.startsWith('manager_spend:')) {
  const clientId = parseInt(data.split(':')[1]);
  await managerHandler.startManagerSpend(ctx, clientId);
}
// ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### BotContext —Ä–∞—Å—à–∏—Ä–µ–Ω:
```typescript
session?: {
  selectedClientId?: number; // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
};
```

#### PointTransaction —Ä–∞—Å—à–∏—Ä–µ–Ω:
```typescript
export interface PointTransaction {
  description?: string;    // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  operator_name?: string;  // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ  
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ PointService:
- `addPoints()` ‚Üí `earnPoints()` ‚úÖ
- `spendPoints()` ‚Üí `spendPoints()` ‚úÖ  
- `adjustPoints()` ‚Üí `adjustPoints()` ‚úÖ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç - –ü–æ–ª–Ω–æ—Å—Ç—å—é –†–∞–±–æ—á–∏–µ –§—É–Ω–∫—Ü–∏–∏

### üí∞ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤:
1. **–ö–ª–∏–∫ "‚ûï –ù–∞—á–∏—Å–ª–∏—Ç—å"** ‚Üí –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Å—É–º–º—ã –ø–æ–∫—É–ø–∫–∏
2. **–í—ã–±–æ—Ä —Å—É–º–º—ã** (100‚ÇΩ, 200‚ÇΩ, 500‚ÇΩ, etc.) ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Üí ‚úÖ –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã + –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥–∏

### üí∏ –°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤:
1. **–ö–ª–∏–∫ "‚ûñ –°–ø–∏—Å–∞—Ç—å"** ‚Üí –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∞–ª–ª–æ–≤
2. **–í—ã–±–æ—Ä –±–∞–ª–ª–æ–≤** (10, 50, 100, etc.) ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Üí ‚úÖ –ë–∞–ª–ª—ã —Å–ø–∏—Å–∞–Ω—ã + –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥–∏

### üéÅ –ë–æ–Ω—É—Å—ã:
- **üéÇ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è** (+100 –±–∞–ª–ª–æ–≤)
- **üéâ –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π** (+50 –±–∞–ª–ª–æ–≤)  
- **üë• –ü—Ä–∏–≤–µ–ª –¥—Ä—É–≥–∞** (+25 –±–∞–ª–ª–æ–≤)
- **üíù –ü–æ–¥–∞—Ä–æ—á–Ω—ã–π** (+30 –±–∞–ª–ª–æ–≤)
- **üèÜ VIP –±–æ–Ω—É—Å** (+200 –±–∞–ª–ª–æ–≤)
- **‚úèÔ∏è –°–≤–æ–π —Ä–∞–∑–º–µ—Ä** (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥)

### ‚öñÔ∏è –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞:
- **‚ûï –£–≤–µ–ª–∏—á–∏—Ç—å** (+10, +50)
- **‚ûñ –£–º–µ–Ω—å—à–∏—Ç—å** (-10, -50)
- **üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤ 0**
- **‚úèÔ∏è –°–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**

### ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:
- **üë§ –§–ò–û** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏
- **üì± –¢–µ–ª–µ—Ñ–æ–Ω** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞
- **üéÇ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã
- **üîÑ –°—Ç–∞—Ç—É—Å** - –∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

### üìù –ó–∞–º–µ—Ç–∫–∏:
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫** –æ –∫–ª–∏–µ–Ω—Ç–µ
- **üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏**
- **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π**

### üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π:
- **–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –∫–ª–∏–µ–Ω—Ç–∞
- **–î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏** (–¥–∞—Ç–∞, —Å—É–º–º–∞, –æ–ø–µ—Ä–∞—Ç–æ—Ä)
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–π**

### üì± SMS —Å–∏—Å—Ç–µ–º–∞:
- **üéÇ –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –î–†** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç
- **üéâ –ê–∫—Ü–∏—è** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–∫–∏–¥–∫–∞—Ö
- **üí∞ –ë–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–ª–∞—Ö
- **‚òï –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ** - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ—Ñ–µ–π–Ω—é
- **‚úèÔ∏è –°–≤–æ–π —Ç–µ–∫—Å—Ç** - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å **–≤—Å–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã**:

‚úÖ **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **–ë–æ–Ω—É—Å—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –∏ –∑–∞–º–µ—Ç–∫–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç  

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞** –º–µ–Ω–µ–¥–∂–µ—Ä–∞/–∞–¥–º–∏–Ω–∞
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π** –≤ activity_log
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –±–∞–ª–∞–Ω—Å–∞** –ø—Ä–∏ —Å–ø–∏—Å–∞–Ω–∏–∏

### üìä –ê—É–¥–∏—Ç:
- **–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –ø—Ä–æ—Ñ–∏–ª–µ–π –∫–ª–∏–µ–Ω—Ç–æ–≤

**–£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏!** üéâ